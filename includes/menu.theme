<?php

/**
 * @file
 * menu.theme
 */

use Drupal\gin\GinSettings;

/**
 * Local actions preprocess.
 */
function gin_preprocess_menu_local_action(&$variables) {
  // Get theme settings.
  $settings = \Drupal::classResolver(GinSettings::class);
  $bundle_select = $settings->get('bundle_select');
  $routeName = $variables['link']['#url']->getRouteName();

  // Modal variant.
  if ($bundle_select === 'modal') {
    if ($routeName === 'node.add_page' || $routeName === 'entity.media.add_page') {
      $variables['link']['#options']['attributes']['class'][] = 'use-ajax';
      $variables['link']['#options']['attributes']['data-dialog-type'] = 'modal';
      $variables['link']['#options']['attributes']['data-dialog-options'] = '{ "width": "800px", "dialogClass": "gin--add-modal" }';
    }
  }
  // Dropbutton variant.
  elseif ($bundle_select === 'drop') {
    // Dropbutton variant code.
  }
}
